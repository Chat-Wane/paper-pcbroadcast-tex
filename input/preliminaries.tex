
\section{Preliminaries}
\label{sec:preliminaries}

Definitions and theorems come from~\cite{hadzilacos1994modular}.

\begin{definition}[Network]
  A network $N$ comprises a set of processes $P$ and a set of edges
  $E: P \times P$. Each process runs a set of instructions
  sequentially. Processes linked by an edge can communicate with each
  other. Processes are faulty if they crash, otherwise they are correct. The set
  of correct processes is $C$. There are no byzantine processes.
\end{definition}

%\TODO{Replace ``network'' by  ``distributed system'' ?}

We define time in a logical sense using Lamport's
definition~\cite{lamport1978time}.

\begin{definition}[Happen before]
  Happen before is a transitive, irreflexive, and antisymmetric relation that
  defines a strict partial orders of events. At process $p$, Event $e$ happens
  before -- or precedes -- Event $e'$ is noted $e_p \rightarrow e'_p$. The
  sending of a message always precedes its receipt: \\
  $\forall p,\,q \in P, s_p(m) \rightarrow r_q(m)$.
\end{definition}

Processes communicate by sending messages to other processes. They can send
messages to specific processes or all of them.

\begin{definition}[Uniform reliable broadcast]
  A process $p$ broadcasts a message $m$ to all processes of the network: \\
  $\forall p \in P,\, (b_p(m) \Leftrightarrow \forall q \in P,\, r_q(m))$. \\
  Uniform reliable broadcast guarantees 3 properties: \\
  \textbf{Validity:} If a correct process broadcasts a message, then it eventually
  delivers it: $\forall p \in C,\, b_p(m) \rightarrow d_p(m)$. \\
  \textbf{Uniform Agreement:} If a process -- correct or not -- delivers a message,
    then all correct processes eventually deliver it:\\
    $\forall p \in P,\, (d_p(m) \implies \forall q \in C,\, d_q(m))$. \\
  \textbf{Uniform Integrity:} A process delivers a message at most once, and
    only if it was previously broadcast:\\
    $\forall p \in P,\, \neg(d_p(m) \rightarrow d_p(m)) \wedge$\\$d_p(m)
    \implies \exists q \in P,\, b_q(m) \rightarrow d_p(m)$.
\end{definition}

\begin{algorithm}[h]
  \input{./input/algoreliablebroadcast.tex}
  \caption{\label{algo:reliablebroadcast}R-broadcast at Process $p$.}
\end{algorithm}

Algorithm~\ref{algo:reliablebroadcast} shows the instructions of a uniform
reliable broadcast. It uses a structure that keeps track of received messages in
order to deliver them at most once. It uses a peer-sampling protocol that
provides neighbors to communicate with, i.e., a set of links. Assuming this
peer-sampling protocol ensures a network without partitions meaning that there
exists at least one path from any process to any correct process, then all
correct processes eventually receive all messages at least once: they either
receive the message directly from the broadcaster or by transitivity. Thus, all
correct processes eventually deliver all messages exactly once. This algorithm
ensures validity, uniform agreement, and uniform integrity.

In addition to reliably conveying messages to all correct processes, broadcast
protocols can ensure that messages are delivered in a specific order.

To order messages broadcast from one process, we define FIFO order.

\begin{definition}[FIFO order]
  If a process broadcasts two messages, processes deliver the first before the
  second:\\
  $\forall p,\,q \in P,\,$\\$b_p(m) \rightarrow b_p(m') \implies d_q(m) \rightarrow
  d_q(m')$.
\end{definition}

To order messages broadcast by different processes, we define local order.

\begin{definition}[Local order]
  If a process broadcasts a message after having delivered another message
  broadcast by another process, processes deliver the later before the former:\\
  $\forall p,\,q,\,r,\, \in P,\,p\neq q,\,$\\$b_p(m) \wedge d_q(m) \rightarrow b_q(m') \implies d_r(m) \rightarrow d_r(m')$.
\end{definition}

To order messages broadcast by every processes, we define causal order.

\begin{definition}[Causal order]
  The delivery order of messages follows the happen before relationships of the
  corresponding broadcasts:\\ $\forall
  p,\,q,\,r \in P,\,$\\$b_p(m) \rightarrow b_q(m') \implies d_r(m) \rightarrow d_r(m')$.
\end{definition}

\begin{theorem}[\label{theo:causal}Causal order equivalence]
  The intersection of FIFO order and local order is equivalent to causal order.
\end{theorem}

\begin{definition}[Causal broadcast]
  Causal broadcast is a uniform reliable broadcast ensuring causal order.
\end{definition}

\begin{figure}
  \begin{center}
  \input{./input/figgeneralproblem.tex}
  \caption{\label{fig:generalproblem}Broadcast without causal order
    enforcement.}
  \end{center}
\end{figure}

Figure~\ref{fig:generalproblem} depicts an example where causal order is
violated. Process $p_1$ broadcasts and delivers $m$. Process $p_2$ receives and
delivers $m$. Then, it broadcasts and delivers $m'$. Process $p_3$ receives $m'$
before $m$. Without any causal order enforcement, $p_3$ delivers $m'$ before $m$
violating the condition stating that the delivery of $m$ should precede the
delivery $m'$.

Multiple approaches exist to enforce causal order by either piggybacking control
information in each message, or constraining the network topology. In this
paper, we introduce a causal broadcast protocol freed from both these
requirements.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../paper"
%%% End:
